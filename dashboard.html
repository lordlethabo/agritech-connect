<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>AgriTech Connect Dashboard</title>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- Awesomplete for Autocomplete -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/awesomplete/1.1.5/awesomplete.min.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/awesomplete/1.1.5/awesomplete.min.js"></script>

  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #f3f5f0;
      margin: 0;
      padding: 0;
    }

    header {
      background-color: #ffffff;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 1rem 2rem;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
    }
    header img {
      height: 50px;
      border-radius: 50%;
    }
    header h1 {
      font-size: 1.5rem;
      color: #4a6b3b;
      margin-left: 1rem;
    }

    section {
      max-width: 960px;
      margin: 2rem auto;
      padding: 1.5rem;
      background: #ffffff;
      border-radius: 16px;
      box-shadow: 0 6px 16px rgba(0, 0, 0, 0.08);
    }

    h2 {
      text-align: center;
      color: #496b3f;
      margin-bottom: 24px;
    }

    .card {
      background: #f4f6f2;
      padding: 1rem;
      border-radius: 12px;
      margin-bottom: 2rem;
    }

    input, button {
      padding: 12px;
      font-size: 1rem;
      border-radius: 12px;
      border: 1px solid #a3b18a;
      margin-bottom: 1rem;
    }

    button {
      background-color: #7ca982;
      color: white;
      border: none;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
    button:hover {
      background-color: #5a7d55;
    }

    canvas {
      margin-top: 30px;
      max-width: 100%;
    }
  </style>
</head>

<body>
  <header>
    <div style="display: flex; align-items: center;">
      <img src="logo.png" alt="AgriTech Logo">
      <h1>AgriTech Innovators Connect</h1>
    </div>
  </header>

  <!-- Knowledge Library Section -->
  <section id="knowledge-library">
    <h2>üìò Knowledge Library</h2>
    <div class="card">
      <p>Access articles, videos, and expert tips to grow your farming knowledge.</p>
      <ul>
        <li><a href="#">How to Detect Maize Leaf Disease</a></li>
        <li><a href="#">Organic Pest Control Techniques</a></li>
        <li><a href="#">Water-Saving Smart Irrigation</a></li>
      </ul>
    </div>
  </section>

  <!-- Events & Training Section -->
  <section id="events-training">
    <h2>üéì Events & Training</h2>
    <div class="card">
      <p>Stay updated with upcoming workshops, webinars, and field days.</p>
      <ul>
        <li>üåæ Youth AgriBootcamp - July 15</li>
        <li>üí° Smart Farm Hackathon - Aug 10</li>
        <li>üìç Crop Disease Webinar - Aug 25</li>
      </ul>
    </div>
  </section>

  <!-- Market Price Tracker -->
  <section id="market-prices">
    <h2>üí∞ Market Price Tracker</h2>
    <div class="card">
      <p>Track real-time produce prices in your region.</p>
      <ul>
        <li>Tomatoes: R12/kg</li>
        <li>Maize: R3.50/kg</li>
        <li>Potatoes: R8/kg</li>
      </ul>
    </div>
  </section>

  <!-- Weather Alerts with Autocomplete and Chart -->
  <section id="weather-alerts" class="weather-section">
    <h2>üå¶Ô∏è Weather Alerts</h2>
    <input type="text" id="weather-location" placeholder="Enter town (e.g. Lebowakgomo)" class="awesomplete" autocomplete="off" />
    <button onclick="getWeather()">Check Weather</button>
    <div id="weather-result"></div>
    <canvas id="weatherChart"></canvas>
  </section>

  <script>
    const weatherApiKey = "4e964608f63e83461ebc8ef5ea65e997";
    let weatherChart = null;

    const townNames = [
      "Lebowakgomo", "Polokwane", "Thohoyandou", "Jane Furse", "Giyani", "Makhado", "Tzaneen",
      "Bela-Bela", "Mokopane", "Musina", "Burgersfort", "Louis Trichardt", "Groblersdal",
      "Modimolle", "Phalaborwa", "Zebediela", "Pretoria", "Johannesburg", "Durban", "Cape Town"
    ];

    new Awesomplete(document.getElementById("weather-location"), {
      list: townNames,
      minChars: 1,
      maxItems: 6,
      autoFirst: true
    });

    function getWeather() {
      const location = document.getElementById("weather-location").value.trim();
      const resultBox = document.getElementById("weather-result");
      const ctx = document.getElementById("weatherChart").getContext('2d');

      if (!location) {
        resultBox.innerHTML = "<p style='color: red;'>Please enter a town name.</p>";
        return;
      }

      resultBox.innerHTML = "<p>Fetching weather data...</p>";

      fetch(`https://api.openweathermap.org/data/2.5/weather?q=${location}&units=metric&appid=${weatherApiKey}`)
        .then(response => {
          if (!response.ok) throw new Error("Town not found.");
          return response.json();
        })
        .then(data => {
          const desc = data.weather[0].description;
          const temp = data.main.temp;
          const feelsLike = data.main.feels_like;
          const humidity = data.main.humidity;
          const wind = data.wind.speed;
          const pressure = data.main.pressure;

          resultBox.innerHTML = `
            <p><strong>Weather:</strong> ${desc}</p>
            <p><strong>Temperature:</strong> ${temp}¬∞C</p>
            <p><strong>Feels Like:</strong> ${feelsLike}¬∞C</p>
            <p><strong>Humidity:</strong> ${humidity}%</p>
            <p><strong>Wind Speed:</strong> ${wind} m/s</p>
            <p><strong>Pressure:</strong> ${pressure} hPa</p>
          `;

          const chartData = {
            labels: ['Temperature (¬∞C)', 'Feels Like', 'Humidity (%)', 'Wind Speed (m/s)', 'Pressure (hPa)'],
            datasets: [{
              label: `Weather in ${location}`,
              data: [temp, feelsLike, humidity, wind, pressure],
              backgroundColor: [
                '#b7d3a8', '#a3b18a', '#ccd5ae', '#d4a373', '#6b705c'
              ],
              borderRadius: 10
            }]
          };

          const chartOptions = {
            indexAxis: 'y',
            responsive: true,
            plugins: { legend: { display: false } },
            scales: { x: { beginAtZero: true } }
          };

          if (weatherChart) weatherChart.destroy();

          weatherChart = new Chart(ctx, {
            type: 'bar',
            data: chartData,
            options: chartOptions
          });
        })
        .catch(error => {
          resultBox.innerHTML = `<p style="color:red;">${error.message}</p>`;
          if (weatherChart) weatherChart.destroy();
        });
    }
  </script>
</body>
</html>
